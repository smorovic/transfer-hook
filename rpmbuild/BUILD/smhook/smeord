#! /bin/bash
#
# smeord       Init file used for starting / stoppping the SM eor daemon.
#
# chkconfig: 2345 85 25
# description: The service that automatically handles end of run on the SM.
# processname: smeord
# pidfile: /var/run/smeord.pid

# Source function library.
. /etc/rc.d/init.d/functions

PROG="smeord.py"

PROG_PATH="/opt/python/smhook/$PROG"
RETVAL=0
export PYTHONPATH=/opt/python

# See how we were called.
case "$1" in
  start)
        echo -n "Starting $PROG: "
        $PROG_PATH start > /dev/null
        RETVAL=$?
        [ $RETVAL -eq 0 ] && success "$PROG startup" || failure "$PROG startup"
        echo
        ;;
  stop)
        echo -n "Stopping $PROG: "
        $PROG_PATH stop > /dev/null
        RETVAL=$?
        [ $RETVAL -eq 0 ] && success "$PROG stop" || failure "$PROG stop"
        echo
        ;;
  kill)
        echo -n "Killing $PROG: "
        $PROG_PATH kill > /dev/null
        RETVAL=$?
        [ $RETVAL -eq 0 ] && success "$PROG kill" || failure "$PROG kill"
        echo
        ;;
  status)
        $PROG_PATH status
        RETVAL=$?
        ;;
  restart)
        $0 stop
        RETVAL=$?
        [ $RETVAL -eq 0 ] && success "$PROG stop" || failure "$PROG stop"
        $0 start
        RETVAL=$?
        [ $RETVAL -eq 0 ] && success "$PROG startup" || failure "$PROG startup"
        ;;
  *)
        echo "Usage: $PROG {start|stop|kill|status|restart}"
        exit 1
esac

exit $RETVAL

